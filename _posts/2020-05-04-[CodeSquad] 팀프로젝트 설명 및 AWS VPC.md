# 2020-05-04 백엔드 수업



## 프로젝트 기본 정리

admin tool : 웹사이트를 통해서 데이터를 입력하는 Tool (선수 데이터 입력, 통계 보기) , 실제 데이터의 DB를 공유한다.

이번주 프로젝트는 Only JDBC template를 활용하여 모든 쿼리문을 직접 작성한다.

OAuth가 지난주에 약간 이상했다.

- FM 방식은 (서버가 있는 OAuth 방식)
    - Client <-> Server <-> Git
        - Response가 이상헀다. JWT Token을 줘야 한다. (Token안에는 email이나 필요한 정보들을 넣어서)
    - 테스트를 못하면, 테스트 페이지를 직접 만들어서 하면 된다.
    - 페이스북의 OAuth의 경우에는 DNS가 있어야 할 것(다양한 OAuth 시도해보자)
- 혹시 가능하다면, Oauth를 별도 라이브러리로 구현해보자 (다른 프로젝트에서 재활용이 가능하다)
    - 어려운데 가능하면 해보자

- 웹소켓을 활용하여 실제 야구게임으로 구현해보는것도 좋다. (물론, 어렵다...)
- AWS Lamda를 활용하여 정해진 시간에 서버를 키고 끌 수 있다. (활용해보자)
- 이번 배포 방식은 S3에 버킷을 만들어서 해당 버킷에 Jar파일을 옮긴뒤에 Jar파일을 감지하여 EC2서버에서 배포를 하게 한다.
- 반드시 공부해야 하는 책
    - 최범균 스프링
    - 토비 스프링
    - DB 교과서 (대학 교재, 초보책 하나)
    - ORM에 관련된 내용 하나 (MyBatis / Hibernate) 학습 , 최범균 JPA 추천
    - 컴공 졸업생에 준하는 실력
        - 정보처리기사, 공부했던 흔적
    - 알고리즘 , 자료구조 기초 책 (뇌를 자극하는 알고리즘)
    - 네트워크 (HTTP 기초)
    - 운영체제 (프로세스 쓰레드, 스케쥴링 I/O)

## VPC , 보안그룹 , 기타

VPC : Amazon Virtual Private Cloud

- 사용자 전용의 가상 네트워크
- 다른 사용자 네트워크와 논리적으로 **완전히** 분리됨
    - 기존에는 하나의 네트워크만 활용했었는데, 다른 사용자의 서버를 볼 수 있다는 단점이 존재했다.
- EC2와 같은 여러 AWS 서비스 리소스를 VPC 내에서 실행함
    - S3는 VPC 외의 별도의 네트워크망에서 돌아간다.
- VPC를 더 작은 범위의 subnet으로 나눌 수 있음
- AWS의 단위 AZ가 모여서 Region을 구성한다. Region이 모여서 Global이 된다.(DNS(Route 53), CDN, IAM 같은 서비스가 Global)
    - CDN : Contents Delivery Network
        - 넷플릭스 같은것
- Region Service
    - S3 서비스
    - VPC (MultiAge)
        - VPC는 우리의 사설 네트워크인데 더 작은 subnet으로 나눌 수 있다.
        - EC2는 VPC에 바로 연결되는 것이 아니라 Subnet에 연결된다.
- AZ Service
    - EC2
    - Subnet

- EC2 를 생성할 때, VPC 설정할 수 있고, Subnet 또한, 설정할 수 있다.

## VPC 설정

- CIDR(사이더) 표기법 (IPv4 CIDR 블록)
    - 10.0.0.1/16 내 vpc에서 사용할 ip /16은 16비트 고정 16비트 가변이라는 뜻, 16비트가 최대이다.
    - /16~/28 범위까지 설정 할 수 있다.
- 테넌시 : 서버가 가까운 곳에 뭉치게 된다.
    - 조금 비싸다
- VPC 내부에 Subnet을 가질 수 있다.
    - VPC를 생성해도 바로 EC2에 연결되지 않는다.
    - EC2는 subnet에 연결되기 때문에, 아직 subnet을 만들지 않았기 때문에, 연결이 되지 않는다.
- 인터넷 게이트웨이를 생성해줘야 한다.
- VPC 피어링
    - 2개 이상의 VPC를 연결하기 위해서 설정 해줘야 하는 기능
    - 2대 이상의 각기다른 서버를 연결할 때 활용한다.
- VPG 연결
    - AWS VPC망은 사내 망이 아닌데, VPG 연결을 하게 되면은 VPN에 접속 할 수 있게 된다.
- VPC Service EndPoint
    - 우리 VPC 서버 안에 없는 것들을 우리 VPC 안으로 끌고오고 싶을 때
    - 예를 들면, 이미지 서버로 S3를 쓰고 있을 때, VPC 안으로 끌고 오면 좋다.



## CIDR 표기법

IP 한개를 표기 할 때는 /32

전 지구의 IP는 0.0.0.0/0

10.1.0.0/16 - 65536

10.1.1.0/24 - 256 (10.1.0.0/16의 서브넷이라고 할 수도 있다.)

10.16.0/20 - 2048 (10.1.0.0/16의 서브넷이지만, 10.1.1.0/24와는 겹치는 부분이 존재한다.(충돌 발생 가능성 존재))



## Subnet

서브넷은 반드시 한 AZ에 속해야 한다.

서브넷은 반드시 하나의 Routing 테이블과 연결되어야 한다.

서브넷마다 고유한 NACL을 가진다.(네트워크 전체 망을 감시하는것, EC2의 Security와는 다르다.)

---

## 팀 프로젝트 할 일

1. DB 설계
    1. N : M  활용해서 화요일까지 설계만
2. 내일 만나는 시간
    1. 1시
3. RDS - EC2 : 각자 구현해보자
    1. 하나는 실서버 하나는 테스트 서버
4. mock api 구현
    1. 목요일? 금요일?